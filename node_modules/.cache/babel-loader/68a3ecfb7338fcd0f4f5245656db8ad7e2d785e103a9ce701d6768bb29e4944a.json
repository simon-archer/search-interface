{"ast":null,"code":"'use client';\n\nimport useDebounce from '../../../utilities/useDebounce.js';\nimport { useComboboxId } from './ComboboxIdContext.js';\nconst useComboboxKeyboard = _ref => {\n  let {\n    readOnly,\n    disabled,\n    interactiveChildren,\n    filteredOptions,\n    inputValue,\n    selectedOptions,\n    multiple,\n    open,\n    options,\n    setOpen,\n    handleSelectOption\n  } = _ref;\n  const {\n    activeIndex\n  } = useComboboxId();\n  // handle keyboard navigation in the list\n  const handleKeyDownFunc = event => {\n    if (readOnly || disabled) return;\n    if (!event) return;\n    switch (event.key) {\n      case 'ArrowDown':\n        event.preventDefault();\n        if (open) break;\n        setOpen(true);\n        break;\n      case 'ArrowUp':\n        event.preventDefault();\n        /* If we are on the first item, close */\n        if (activeIndex !== 0) break;\n        setOpen(false);\n        break;\n      case 'Enter':\n        event.preventDefault();\n        // ignore if it is closed\n        if (!open) break;\n        // check if we are in the custom components\n        if (activeIndex <= interactiveChildren.length - 1) {\n          const selectedComponent = interactiveChildren[activeIndex];\n          if (selectedComponent.props.onSelect) {\n            selectedComponent?.props.onSelect();\n            return;\n          }\n        }\n        // if we are in the options, find the actual index\n        // eslint-disable-next-line no-case-declarations\n        const valueIndex = activeIndex - interactiveChildren.length;\n        // eslint-disable-next-line no-case-declarations\n        const option = filteredOptions[valueIndex];\n        handleSelectOption({\n          option: options[option]\n        });\n        break;\n      case 'Backspace':\n        // if we are in single mode, we need to set selectedOptions to empty\n        if (!multiple) {\n          const lastOption = Object.keys(selectedOptions).pop();\n          lastOption && handleSelectOption({\n            option: selectedOptions[lastOption],\n            remove: true\n          });\n          break;\n        }\n        if (inputValue === '' && multiple) {\n          const lastOption = Object.keys(selectedOptions).pop();\n          /* Remove last option, and use handleSelectOption */\n          lastOption && handleSelectOption({\n            option: selectedOptions[lastOption],\n            remove: true\n          });\n        }\n        break;\n    }\n  };\n  const handleKeyDown = useDebounce(handleKeyDownFunc, 20);\n  return handleKeyDown;\n};\nexport { useComboboxKeyboard };","map":{"version":3,"names":["useDebounce","useComboboxId","useComboboxKeyboard","_ref","readOnly","disabled","interactiveChildren","filteredOptions","inputValue","selectedOptions","multiple","open","options","setOpen","handleSelectOption","activeIndex","handleKeyDownFunc","event","key","preventDefault","length","selectedComponent","props","onSelect","valueIndex","option","lastOption","Object","keys","pop","remove","handleKeyDown"],"sources":["/Users/simondreyer/CascadeProjects/search-interface/node_modules/@digdir/designsystemet-react/dist/esm/components/form/Combobox/useComboboxKeyboard.js"],"sourcesContent":["'use client';\nimport useDebounce from '../../../utilities/useDebounce.js';\nimport { useComboboxId } from './ComboboxIdContext.js';\n\nconst useComboboxKeyboard = ({ readOnly, disabled, interactiveChildren, filteredOptions, inputValue, selectedOptions, multiple, open, options, setOpen, handleSelectOption, }) => {\n    const { activeIndex } = useComboboxId();\n    // handle keyboard navigation in the list\n    const handleKeyDownFunc = (event) => {\n        if (readOnly || disabled)\n            return;\n        if (!event)\n            return;\n        switch (event.key) {\n            case 'ArrowDown':\n                event.preventDefault();\n                if (open)\n                    break;\n                setOpen(true);\n                break;\n            case 'ArrowUp':\n                event.preventDefault();\n                /* If we are on the first item, close */\n                if (activeIndex !== 0)\n                    break;\n                setOpen(false);\n                break;\n            case 'Enter':\n                event.preventDefault();\n                // ignore if it is closed\n                if (!open)\n                    break;\n                // check if we are in the custom components\n                if (activeIndex <= interactiveChildren.length - 1) {\n                    const selectedComponent = interactiveChildren[activeIndex];\n                    if (selectedComponent.props.onSelect) {\n                        selectedComponent?.props.onSelect();\n                        return;\n                    }\n                }\n                // if we are in the options, find the actual index\n                // eslint-disable-next-line no-case-declarations\n                const valueIndex = activeIndex - interactiveChildren.length;\n                // eslint-disable-next-line no-case-declarations\n                const option = filteredOptions[valueIndex];\n                handleSelectOption({ option: options[option] });\n                break;\n            case 'Backspace':\n                // if we are in single mode, we need to set selectedOptions to empty\n                if (!multiple) {\n                    const lastOption = Object.keys(selectedOptions).pop();\n                    lastOption &&\n                        handleSelectOption({\n                            option: selectedOptions[lastOption],\n                            remove: true,\n                        });\n                    break;\n                }\n                if (inputValue === '' && multiple) {\n                    const lastOption = Object.keys(selectedOptions).pop();\n                    /* Remove last option, and use handleSelectOption */\n                    lastOption &&\n                        handleSelectOption({\n                            option: selectedOptions[lastOption],\n                            remove: true,\n                        });\n                }\n                break;\n        }\n    };\n    const handleKeyDown = useDebounce(handleKeyDownFunc, 20);\n    return handleKeyDown;\n};\n\nexport { useComboboxKeyboard };\n"],"mappings":"AAAA,YAAY;;AACZ,OAAOA,WAAW,MAAM,mCAAmC;AAC3D,SAASC,aAAa,QAAQ,wBAAwB;AAEtD,MAAMC,mBAAmB,GAAGC,IAAA,IAAsJ;EAAA,IAArJ;IAAEC,QAAQ;IAAEC,QAAQ;IAAEC,mBAAmB;IAAEC,eAAe;IAAEC,UAAU;IAAEC,eAAe;IAAEC,QAAQ;IAAEC,IAAI;IAAEC,OAAO;IAAEC,OAAO;IAAEC;EAAoB,CAAC,GAAAX,IAAA;EACzK,MAAM;IAAEY;EAAY,CAAC,GAAGd,aAAa,CAAC,CAAC;EACvC;EACA,MAAMe,iBAAiB,GAAIC,KAAK,IAAK;IACjC,IAAIb,QAAQ,IAAIC,QAAQ,EACpB;IACJ,IAAI,CAACY,KAAK,EACN;IACJ,QAAQA,KAAK,CAACC,GAAG;MACb,KAAK,WAAW;QACZD,KAAK,CAACE,cAAc,CAAC,CAAC;QACtB,IAAIR,IAAI,EACJ;QACJE,OAAO,CAAC,IAAI,CAAC;QACb;MACJ,KAAK,SAAS;QACVI,KAAK,CAACE,cAAc,CAAC,CAAC;QACtB;QACA,IAAIJ,WAAW,KAAK,CAAC,EACjB;QACJF,OAAO,CAAC,KAAK,CAAC;QACd;MACJ,KAAK,OAAO;QACRI,KAAK,CAACE,cAAc,CAAC,CAAC;QACtB;QACA,IAAI,CAACR,IAAI,EACL;QACJ;QACA,IAAII,WAAW,IAAIT,mBAAmB,CAACc,MAAM,GAAG,CAAC,EAAE;UAC/C,MAAMC,iBAAiB,GAAGf,mBAAmB,CAACS,WAAW,CAAC;UAC1D,IAAIM,iBAAiB,CAACC,KAAK,CAACC,QAAQ,EAAE;YAClCF,iBAAiB,EAAEC,KAAK,CAACC,QAAQ,CAAC,CAAC;YACnC;UACJ;QACJ;QACA;QACA;QACA,MAAMC,UAAU,GAAGT,WAAW,GAAGT,mBAAmB,CAACc,MAAM;QAC3D;QACA,MAAMK,MAAM,GAAGlB,eAAe,CAACiB,UAAU,CAAC;QAC1CV,kBAAkB,CAAC;UAAEW,MAAM,EAAEb,OAAO,CAACa,MAAM;QAAE,CAAC,CAAC;QAC/C;MACJ,KAAK,WAAW;QACZ;QACA,IAAI,CAACf,QAAQ,EAAE;UACX,MAAMgB,UAAU,GAAGC,MAAM,CAACC,IAAI,CAACnB,eAAe,CAAC,CAACoB,GAAG,CAAC,CAAC;UACrDH,UAAU,IACNZ,kBAAkB,CAAC;YACfW,MAAM,EAAEhB,eAAe,CAACiB,UAAU,CAAC;YACnCI,MAAM,EAAE;UACZ,CAAC,CAAC;UACN;QACJ;QACA,IAAItB,UAAU,KAAK,EAAE,IAAIE,QAAQ,EAAE;UAC/B,MAAMgB,UAAU,GAAGC,MAAM,CAACC,IAAI,CAACnB,eAAe,CAAC,CAACoB,GAAG,CAAC,CAAC;UACrD;UACAH,UAAU,IACNZ,kBAAkB,CAAC;YACfW,MAAM,EAAEhB,eAAe,CAACiB,UAAU,CAAC;YACnCI,MAAM,EAAE;UACZ,CAAC,CAAC;QACV;QACA;IACR;EACJ,CAAC;EACD,MAAMC,aAAa,GAAG/B,WAAW,CAACgB,iBAAiB,EAAE,EAAE,CAAC;EACxD,OAAOe,aAAa;AACxB,CAAC;AAED,SAAS7B,mBAAmB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}