'use client';
import { useContext, useId } from 'react';
import { ToggleGroupContext } from '../ToggleGroup.js';

/** Handles props for `ToggleGroup.Item` in context with `ToggleGroup` and `RovingTabIndex` */
const useToggleGroupItem = (props) => {
    const { ...rest } = props;
    const toggleGroup = useContext(ToggleGroupContext);
    const itemValue = props.value ?? (typeof props.children === 'string' ? props.children : '');
    const active = toggleGroup.value == itemValue;
    const buttonId = `togglegroup-item-${useId()}`;
    return {
        ...rest,
        active: active,
        size: toggleGroup?.size,
        buttonProps: {
            id: buttonId,
            'aria-checked': active,
            'aria-current': active,
            role: 'radio',
            name: toggleGroup.name,
            onClick: () => {
                toggleGroup.onChange?.(itemValue);
            },
        },
    };
};

export { useToggleGroupItem };
