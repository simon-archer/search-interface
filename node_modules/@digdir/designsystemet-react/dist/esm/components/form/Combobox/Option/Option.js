'use client';
import { jsxs, jsx } from 'react/jsx-runtime';
import { memo, forwardRef, useId, useContext } from 'react';
import { clsx } from '../../../../node_modules/clsx/dist/lite.js';
import { ComboboxContext } from '../ComboboxContext.js';
import { SelectedIcon } from './SelectedIcon.js';
import ComboboxOptionDescription from './Description.js';
import useComboboxOption from './useComboboxOption.js';
import { omit } from '../../../../utilities/objectUtils.js';
import { Label } from '../../../Typography/Label/Label.js';

const ComboboxOption = memo(forwardRef(({ value, description, children, className, ...rest }, forwardedRef) => {
    const labelId = useId();
    const { id, ref, selected, active, onOptionClick } = useComboboxOption({
        id: rest.id,
        ref: forwardedRef,
        value,
    });
    const context = useContext(ComboboxContext);
    if (!context) {
        throw new Error('ComboboxOption must be used within a Combobox');
    }
    const { size, multiple, getItemProps } = context;
    const props = getItemProps();
    return (jsxs("button", { ref: ref, id: id, role: 'option', type: 'button', "aria-selected": !!selected, "aria-labelledby": labelId, tabIndex: -1, onClick: (e) => {
            onOptionClick();
            rest.onClick?.(e);
        }, className: clsx('fds-combobox__option', active && 'fds-combobox__option--active', multiple && 'fds-combobox__option--multiple', className), ...omit(['displayValue'], rest), ...omit(['onClick', 'onPointerLeave'], props), children: [jsx(Label, { asChild: true, size: size, children: jsx("span", { children: jsx(SelectedIcon, { multiple: multiple, selected: !!selected }) }) }), jsxs(Label, { className: 'fds-combobox__option__label', size: size, id: labelId, children: [children, description && (jsx(ComboboxOptionDescription, { children: description }))] })] }));
}));
ComboboxOption.displayName = 'ComboboxOption';

export { ComboboxOption };
