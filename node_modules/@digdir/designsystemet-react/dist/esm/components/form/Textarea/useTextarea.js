'use client';
import { useContext } from 'react';
import { useFormField } from '../useFormField.js';
import { FieldsetContext } from '../Fieldset/FieldsetContext.js';
import { getSize } from '../../../utilities/getSize.js';

/** Handles props for `Textarea` in context with `Fieldset` */
const useTextarea = (props) => {
    const fieldset = useContext(FieldsetContext);
    const { inputProps, readOnly, ...rest } = useFormField(props, 'textarea');
    const size = fieldset?.size ?? getSize(props.size ?? 'md');
    return {
        ...rest,
        readOnly,
        size,
        textareaProps: {
            ...inputProps,
            readOnly,
            onClick: (e) => {
                if (readOnly) {
                    e.preventDefault();
                    return;
                }
                props?.onClick?.(e);
            },
            onChange: (e) => {
                if (readOnly) {
                    e.preventDefault();
                    return;
                }
                props?.onChange?.(e);
            },
        },
    };
};

export { useTextarea };
