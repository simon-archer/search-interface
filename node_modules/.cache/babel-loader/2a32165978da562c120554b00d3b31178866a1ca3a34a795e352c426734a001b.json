{"ast":null,"code":"'use client';\n\nimport { jsx } from 'react/jsx-runtime';\nimport { createContext, forwardRef, useState, useRef } from 'react';\nimport { useMergeRefs } from '../../node_modules/@floating-ui/react/dist/floating-ui.react.js';\nimport { Slot as $5e63c961fc1ce211$export$8c6ed5c666ac1360 } from '../../node_modules/@radix-ui/react-slot/dist/index.js';\nconst RovingTabindexContext = createContext({\n  elements: {\n    current: new Map()\n  },\n  getOrderedItems: () => [],\n  setFocusableValue: () => {\n    /* intentionally empty */\n  },\n  onShiftTab: () => {\n    /* intentionally empty */\n  },\n  focusableValue: null\n});\nconst RovingTabindexRoot = forwardRef((_ref, ref) => {\n  let {\n    valueId,\n    asChild,\n    onBlur,\n    onFocus,\n    ...rest\n  } = _ref;\n  const Component = asChild ? $5e63c961fc1ce211$export$8c6ed5c666ac1360 : 'div';\n  const [focusableValue, setFocusableValue] = useState(null);\n  const [isShiftTabbing, setIsShiftTabbing] = useState(false);\n  const elements = useRef(new Map());\n  const myRef = useRef();\n  const refs = useMergeRefs([ref, myRef]);\n  const getOrderedItems = () => {\n    if (!myRef.current) return [];\n    const elementsFromDOM = Array.from(myRef.current.querySelectorAll('[data-roving-tabindex-item]'));\n    return Array.from(elements.current).sort((a, b) => elementsFromDOM.indexOf(a[1]) - elementsFromDOM.indexOf(b[1])).map(_ref2 => {\n      let [value, element] = _ref2;\n      return {\n        value,\n        element\n      };\n    });\n  };\n  return jsx(RovingTabindexContext.Provider, {\n    value: {\n      elements,\n      getOrderedItems,\n      focusableValue,\n      setFocusableValue,\n      onShiftTab: () => {\n        setIsShiftTabbing(true);\n      }\n    },\n    children: jsx(Component, {\n      ...rest,\n      tabIndex: isShiftTabbing ? -1 : 0,\n      onBlur: e => {\n        onBlur?.(e);\n        setIsShiftTabbing(false);\n      },\n      onFocus: e => {\n        onFocus?.(e);\n        if (e.target !== e.currentTarget) return;\n        const orderedItems = getOrderedItems();\n        if (orderedItems.length === 0) return;\n        if (focusableValue != null) {\n          elements.current.get(focusableValue)?.focus();\n        } else if (valueId != null) {\n          elements.current.get(valueId)?.focus();\n        } else {\n          orderedItems.at(0)?.element.focus();\n        }\n      },\n      ref: refs\n    })\n  });\n});\nexport { RovingTabindexContext, RovingTabindexRoot };","map":{"version":3,"names":["jsx","createContext","forwardRef","useState","useRef","useMergeRefs","Slot","$5e63c961fc1ce211$export$8c6ed5c666ac1360","RovingTabindexContext","elements","current","Map","getOrderedItems","setFocusableValue","onShiftTab","focusableValue","RovingTabindexRoot","_ref","ref","valueId","asChild","onBlur","onFocus","rest","Component","isShiftTabbing","setIsShiftTabbing","myRef","refs","elementsFromDOM","Array","from","querySelectorAll","sort","a","b","indexOf","map","_ref2","value","element","Provider","children","tabIndex","e","target","currentTarget","orderedItems","length","get","focus","at"],"sources":["/Users/simondreyer/CascadeProjects/search-interface/node_modules/@digdir/designsystemet-react/dist/esm/utilities/RovingTabIndex/RovingTabindexRoot.js"],"sourcesContent":["'use client';\nimport { jsx } from 'react/jsx-runtime';\nimport { createContext, forwardRef, useState, useRef } from 'react';\nimport { useMergeRefs } from '../../node_modules/@floating-ui/react/dist/floating-ui.react.js';\nimport { Slot as $5e63c961fc1ce211$export$8c6ed5c666ac1360 } from '../../node_modules/@radix-ui/react-slot/dist/index.js';\n\nconst RovingTabindexContext = createContext({\n    elements: { current: new Map() },\n    getOrderedItems: () => [],\n    setFocusableValue: () => {\n        /* intentionally empty */\n    },\n    onShiftTab: () => {\n        /* intentionally empty */\n    },\n    focusableValue: null,\n});\nconst RovingTabindexRoot = forwardRef(({ valueId, asChild, onBlur, onFocus, ...rest }, ref) => {\n    const Component = asChild ? $5e63c961fc1ce211$export$8c6ed5c666ac1360 : 'div';\n    const [focusableValue, setFocusableValue] = useState(null);\n    const [isShiftTabbing, setIsShiftTabbing] = useState(false);\n    const elements = useRef(new Map());\n    const myRef = useRef();\n    const refs = useMergeRefs([ref, myRef]);\n    const getOrderedItems = () => {\n        if (!myRef.current)\n            return [];\n        const elementsFromDOM = Array.from(myRef.current.querySelectorAll('[data-roving-tabindex-item]'));\n        return Array.from(elements.current)\n            .sort((a, b) => elementsFromDOM.indexOf(a[1]) - elementsFromDOM.indexOf(b[1]))\n            .map(([value, element]) => ({ value, element }));\n    };\n    return (jsx(RovingTabindexContext.Provider, { value: {\n            elements,\n            getOrderedItems,\n            focusableValue,\n            setFocusableValue,\n            onShiftTab: () => {\n                setIsShiftTabbing(true);\n            },\n        }, children: jsx(Component, { ...rest, tabIndex: isShiftTabbing ? -1 : 0, onBlur: (e) => {\n                onBlur?.(e);\n                setIsShiftTabbing(false);\n            }, onFocus: (e) => {\n                onFocus?.(e);\n                if (e.target !== e.currentTarget)\n                    return;\n                const orderedItems = getOrderedItems();\n                if (orderedItems.length === 0)\n                    return;\n                if (focusableValue != null) {\n                    elements.current.get(focusableValue)?.focus();\n                }\n                else if (valueId != null) {\n                    elements.current.get(valueId)?.focus();\n                }\n                else {\n                    orderedItems.at(0)?.element.focus();\n                }\n            }, ref: refs }) }));\n});\n\nexport { RovingTabindexContext, RovingTabindexRoot };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}