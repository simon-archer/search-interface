{"ast":null,"code":"'use client';\n\nimport { jsxs, jsx } from 'react/jsx-runtime';\nimport { useContext } from 'react';\nimport { clsx } from '../../../../node_modules/clsx/dist/lite.js';\nimport { ChevronUpIcon, ChevronDownIcon } from '@navikt/aksel-icons';\nimport { useMergeRefs } from '../../../../node_modules/@floating-ui/react/dist/floating-ui.react.js';\nimport { ComboboxContext } from '../ComboboxContext.js';\nimport { useComboboxIdDispatch } from '../ComboboxIdContext.js';\nimport { prefix } from '../useCombobox.js';\nimport ComboboxChips from './ComboboxChips.js';\nimport ComboboxClearButton from './ComboboxClearButton.js';\nimport { Box } from '../../../Box/Box.js';\nimport { omit } from '../../../../utilities/objectUtils.js';\nconst ComboboxInput = ({\n  hideClearButton,\n  listId,\n  error,\n  hideChips,\n  handleKeyDown,\n  ...rest\n}) => {\n  const context = useContext(ComboboxContext);\n  const idDispatch = useComboboxIdDispatch();\n  if (!context) {\n    throw new Error('ComboboxContext is missing');\n  }\n  const setActiveIndex = id => {\n    idDispatch?.({\n      type: 'SET_ACTIVE_INDEX',\n      payload: id\n    });\n  };\n  const {\n    forwareddRef,\n    readOnly,\n    disabled,\n    open,\n    inputRef,\n    refs,\n    inputValue,\n    multiple,\n    selectedOptions,\n    formFieldProps,\n    htmlSize,\n    options,\n    setOpen,\n    getReferenceProps,\n    setInputValue,\n    handleSelectOption\n  } = context;\n  const mergedRefs = useMergeRefs([forwareddRef, inputRef]);\n  // onChange function for the input\n  const onChange = event => {\n    const value = event.target.value;\n    setInputValue(value);\n    setActiveIndex(0);\n    // check if input value is the same as a label, if so, select it\n    const option = options[prefix(value.toLowerCase())];\n    if (!option) return;\n    if (selectedOptions[prefix(option.value)]) return;\n    handleSelectOption({\n      option: option\n    });\n  };\n  const showClearButton = multiple && !hideClearButton && Object.keys(selectedOptions).length > 0;\n  /* Props from floating-ui */\n  const props = getReferenceProps({\n    ref: refs?.setReference,\n    role: null,\n    'aria-controls': null,\n    'aria-expanded': null,\n    'aria-haspopup': null,\n    /* If we click the wrapper, open the list, set index to first option, and focus the input */\n    onClick() {\n      if (disabled) return;\n      if (readOnly) return;\n      setOpen(true);\n      setActiveIndex(0);\n      inputRef.current?.focus();\n    },\n    /* Handles list navigation */\n    onKeyDown: handleKeyDown,\n    // preventDefault on keydown to avoid sending in form\n    onKeyPress(event) {\n      if (event.key === 'Enter') {\n        event.preventDefault();\n      }\n    }\n  });\n  return jsxs(Box, {\n    ...props,\n    \"aria-disabled\": disabled,\n    className: clsx('fds-textfield__input', 'fds-combobox__input__wrapper', readOnly && 'fds-combobox--readonly', error && 'fds-combobox--error'),\n    children: [jsxs(\"div\", {\n      className: 'fds-combobox__chip-and-input',\n      children: [multiple && !hideChips && jsx(ComboboxChips, {}), jsx(\"input\", {\n        ref: mergedRefs,\n        \"aria-activedescendant\": props['aria-activedescendant'],\n        readOnly: readOnly,\n        \"aria-autocomplete\": 'list',\n        role: 'combobox',\n        \"aria-expanded\": open,\n        \"aria-controls\": open ? listId : undefined,\n        autoComplete: 'off',\n        size: htmlSize,\n        value: inputValue,\n        ...omit(['style', 'className'], rest),\n        ...formFieldProps.inputProps,\n        className: 'fds-combobox__input',\n        onChange: e => {\n          onChange(e);\n          !open && setOpen(true);\n          rest.onChange && rest.onChange(e);\n        }\n      })]\n    }), showClearButton && jsx(ComboboxClearButton, {}), jsx(\"div\", {\n      className: 'fds-combobox__arrow',\n      children: open ? jsx(ChevronUpIcon, {\n        title: 'arrow up',\n        fontSize: '1.5em'\n      }) : jsx(ChevronDownIcon, {\n        title: 'arrow down',\n        fontSize: '1.5em'\n      })\n    })]\n  });\n};\nComboboxInput.displayName = 'ComboboxInput';\nvar ComboboxInput$1 = ComboboxInput;\nexport { ComboboxInput, ComboboxInput$1 as default };","map":{"version":3,"names":["jsxs","jsx","useContext","clsx","ChevronUpIcon","ChevronDownIcon","useMergeRefs","ComboboxContext","useComboboxIdDispatch","prefix","ComboboxChips","ComboboxClearButton","Box","omit","ComboboxInput","hideClearButton","listId","error","hideChips","handleKeyDown","rest","context","idDispatch","Error","setActiveIndex","id","type","payload","forwareddRef","readOnly","disabled","open","inputRef","refs","inputValue","multiple","selectedOptions","formFieldProps","htmlSize","options","setOpen","getReferenceProps","setInputValue","handleSelectOption","mergedRefs","onChange","event","value","target","option","toLowerCase","showClearButton","Object","keys","length","props","ref","setReference","role","onClick","current","focus","onKeyDown","onKeyPress","key","preventDefault","className","children","undefined","autoComplete","size","inputProps","e","title","fontSize","displayName","ComboboxInput$1","default"],"sources":["/Users/simondreyer/CascadeProjects/search-interface/node_modules/@digdir/designsystemet-react/dist/esm/components/form/Combobox/internal/ComboboxInput.js"],"sourcesContent":["'use client';\nimport { jsxs, jsx } from 'react/jsx-runtime';\nimport { useContext } from 'react';\nimport { clsx } from '../../../../node_modules/clsx/dist/lite.js';\nimport { ChevronUpIcon, ChevronDownIcon } from '@navikt/aksel-icons';\nimport { useMergeRefs } from '../../../../node_modules/@floating-ui/react/dist/floating-ui.react.js';\nimport { ComboboxContext } from '../ComboboxContext.js';\nimport { useComboboxIdDispatch } from '../ComboboxIdContext.js';\nimport { prefix } from '../useCombobox.js';\nimport ComboboxChips from './ComboboxChips.js';\nimport ComboboxClearButton from './ComboboxClearButton.js';\nimport { Box } from '../../../Box/Box.js';\nimport { omit } from '../../../../utilities/objectUtils.js';\n\nconst ComboboxInput = ({ hideClearButton, listId, error, hideChips, handleKeyDown, ...rest }) => {\n    const context = useContext(ComboboxContext);\n    const idDispatch = useComboboxIdDispatch();\n    if (!context) {\n        throw new Error('ComboboxContext is missing');\n    }\n    const setActiveIndex = (id) => {\n        idDispatch?.({ type: 'SET_ACTIVE_INDEX', payload: id });\n    };\n    const { forwareddRef, readOnly, disabled, open, inputRef, refs, inputValue, multiple, selectedOptions, formFieldProps, htmlSize, options, setOpen, getReferenceProps, setInputValue, handleSelectOption, } = context;\n    const mergedRefs = useMergeRefs([forwareddRef, inputRef]);\n    // onChange function for the input\n    const onChange = (event) => {\n        const value = event.target.value;\n        setInputValue(value);\n        setActiveIndex(0);\n        // check if input value is the same as a label, if so, select it\n        const option = options[prefix(value.toLowerCase())];\n        if (!option)\n            return;\n        if (selectedOptions[prefix(option.value)])\n            return;\n        handleSelectOption({ option: option });\n    };\n    const showClearButton = multiple && !hideClearButton && Object.keys(selectedOptions).length > 0;\n    /* Props from floating-ui */\n    const props = getReferenceProps({\n        ref: refs?.setReference,\n        role: null,\n        'aria-controls': null,\n        'aria-expanded': null,\n        'aria-haspopup': null,\n        /* If we click the wrapper, open the list, set index to first option, and focus the input */\n        onClick() {\n            if (disabled)\n                return;\n            if (readOnly)\n                return;\n            setOpen(true);\n            setActiveIndex(0);\n            inputRef.current?.focus();\n        },\n        /* Handles list navigation */\n        onKeyDown: handleKeyDown,\n        // preventDefault on keydown to avoid sending in form\n        onKeyPress(event) {\n            if (event.key === 'Enter') {\n                event.preventDefault();\n            }\n        },\n    });\n    return (jsxs(Box, { ...props, \"aria-disabled\": disabled, className: clsx('fds-textfield__input', 'fds-combobox__input__wrapper', readOnly && 'fds-combobox--readonly', error && 'fds-combobox--error'), children: [jsxs(\"div\", { className: 'fds-combobox__chip-and-input', children: [multiple && !hideChips && jsx(ComboboxChips, {}), jsx(\"input\", { ref: mergedRefs, \"aria-activedescendant\": props['aria-activedescendant'], readOnly: readOnly, \"aria-autocomplete\": 'list', role: 'combobox', \"aria-expanded\": open, \"aria-controls\": open ? listId : undefined, autoComplete: 'off', size: htmlSize, value: inputValue, ...omit(['style', 'className'], rest), ...formFieldProps.inputProps, className: 'fds-combobox__input', onChange: (e) => {\n                            onChange(e);\n                            !open && setOpen(true);\n                            rest.onChange && rest.onChange(e);\n                        } })] }), showClearButton && jsx(ComboboxClearButton, {}), jsx(\"div\", { className: 'fds-combobox__arrow', children: open ? (jsx(ChevronUpIcon, { title: 'arrow up', fontSize: '1.5em' })) : (jsx(ChevronDownIcon, { title: 'arrow down', fontSize: '1.5em' })) })] }));\n};\nComboboxInput.displayName = 'ComboboxInput';\nvar ComboboxInput$1 = ComboboxInput;\n\nexport { ComboboxInput, ComboboxInput$1 as default };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}